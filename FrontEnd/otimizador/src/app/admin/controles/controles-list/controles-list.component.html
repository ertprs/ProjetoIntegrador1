<h3 class="text-center">Controles</h3>

<div *ngIf="empresa" >
  <hr>
    <h4>{{ empresa?.nome }} - {{ empresa?.id_empresa }}</h4>
    <h6>Respons√°vel: {{ empresa?.usuario?.nome }} </h6>
    <hr>
</div>

<button class="btn btn-primary mb-2 mt-2" (click)="novo()" ><i class="fas fa-plus"></i> Novo controle</button>
<table class="table table-sm table-striped table-hover table-bordered table-responsive-sm">
  <thead class="table-active">
    <th class="text-center">Ano</th>
    <th class="text-center">JAN</th>
    <th class="text-center">FEV</th>
    <th class="text-center">MAR</th>
    <th class="text-center">ABR</th>
    <th class="text-center">MAI</th>
    <th class="text-center">JUN</th>
    <th class="text-center">JUL</th>
    <th class="text-center">AGO</th>
    <th class="text-center">SET</th>
    <th class="text-center">OUT</th>
    <th class="text-center">NOV</th>
    <th class="text-center">DEZ</th>
    <th class="text-center">OBS</th>
    <th class="text-center">Controle</th>
  </thead>
  <tbody>
    <tr *ngFor="let c of controles" >
      <td class="text-center">{{ c.ano }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.jan == 'OK', 'table-danger': c.jan == 'X', 'table-secondary': c.jan == ''}">{{ c.jan }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.fev == 'OK', 'table-danger': c.fev == 'X', 'table-secondary': c.fev == ''}">{{ c.fev }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.mar == 'OK', 'table-danger': c.mar == 'X', 'table-secondary': c.mar == ''}">{{ c.mar }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.abr == 'OK', 'table-danger': c.abr == 'X', 'table-secondary': c.abr == ''}">{{ c.abr }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.mai == 'OK', 'table-danger': c.mai == 'X', 'table-secondary': c.mai == ''}">{{ c.mai }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.jun == 'OK', 'table-danger': c.jun == 'X', 'table-secondary': c.jun == ''}">{{ c.jun }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.jul == 'OK', 'table-danger': c.jul == 'X', 'table-secondary': c.jul == ''}">{{ c.jul }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.ago == 'OK', 'table-danger': c.ago == 'X', 'table-secondary': c.ago == ''}">{{ c.ago }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.set == 'OK', 'table-danger': c.set == 'X', 'table-secondary': c.set == ''}">{{ c.set }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.out == 'OK', 'table-danger': c.out == 'X', 'table-secondary': c.out == ''}">{{ c.out }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.nov == 'OK', 'table-danger': c.nov == 'X', 'table-secondary': c.nov == ''}">{{ c.nov }}</td>
      <td class="text-center" [ngClass]="{ 'table-success': c.dez == 'OK', 'table-danger': c.dez == 'X', 'table-secondary': c.dez == ''}">{{ c.dez }}</td>
      <td class="text-center">
        <div class="row">
          <div class="col-sm-6">
            <button *ngIf="c.observacoes.length > 0" type="button" class="btn btn-secondary btn-sm ml-4 mb-2" (click)="verObservacoes(c.id_controle)" ><i class="fas fa-eye"></i> Ver</button>
          </div>
          <div class="col-sm-6 mr-0">
            <button type="button" class="btn btn-info btn-sm mr-1 mb-2" (click)="editarObservacao(c.id_controle)" ><i class="fas fa-edit"></i>  Editar</button>
          </div>
        </div>
      </td>
      <td class="text-center">
        <button type="button" class="btn btn-info btn-sm mr-2 p-1 mb-2" (click)="editar(c.id_controle)" ><i class="fas fa-edit"></i>  Editar</button>
        <!-- <button type="button" class="btn btn-secondary btn-sm p-1">Atualizar</button> -->
      </td>
    </tr>
  </tbody>
</table>
<div class="row">
  <div class="col-sm-12 text-center mb-2">
    <h4>{{ msgDados }}</h4>
  </div>
</div>
<button type="button" class="btn btn-primary" (click)="onBack()" ><i class="fas fa-undo-alt"></i> Voltar</button>
<ngx-spinner></ngx-spinner>
